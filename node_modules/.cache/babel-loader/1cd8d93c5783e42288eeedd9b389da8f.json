{"ast":null,"code":"import _regeneratorRuntime from \"/Users/chitranshagnihotri/Desktop/work/code/freelancer_react/Edunomics1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/chitranshagnihotri/Desktop/work/code/freelancer_react/Edunomics1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/chitranshagnihotri/Desktop/work/code/freelancer_react/Edunomics1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/chitranshagnihotri/Desktop/work/code/freelancer_react/Edunomics1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/chitranshagnihotri/Desktop/work/code/freelancer_react/Edunomics1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/chitranshagnihotri/Desktop/work/code/freelancer_react/Edunomics1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/chitranshagnihotri/Desktop/work/code/freelancer_react/Edunomics1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/chitranshagnihotri/Desktop/work/code/freelancer_react/Edunomics1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/chitranshagnihotri/Desktop/work/code/freelancer_react/Edunomics1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/chitranshagnihotri/Desktop/work/code/freelancer_react/Edunomics1/src/components/Login/AddLogin.js\";\nimport React, { Component } from \"react\";\nimport \"./Login.css\";\nimport { Link, Redirect, withRouter, NavLink } from \"react-router-dom\";\nimport axios from \"axios\";\nimport authService from \"../../services/auth-service\";\nimport axiosService from \"../../services/axios-service\";\nimport { API_URL } from \"../../services/url\";\n\nvar AddLogin =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddLogin, _Component);\n\n  function AddLogin(props) {\n    var _this;\n\n    _classCallCheck(this, AddLogin);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddLogin).call(this, props));\n\n    _this.change = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.state = {\n      email: \"\",\n      password: \"\"\n    };\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(AddLogin, [{\n    key: \"onSubmit\",\n    value: function () {\n      var _onSubmit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var response, res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault(); // this.setState({\n                //   email: \"\",\n                //   password: \"\"\n                // });\n\n                _context.prev = 1;\n                _context.next = 4;\n                return axios.post(\"\".concat(API_URL, \"employee/login\"), this.state);\n\n              case 4:\n                response = _context.sent;\n                console.log(response);\n\n                if (!response.data.success) {\n                  _context.next = 18;\n                  break;\n                }\n\n                localStorage.setItem('token', response.data.token);\n                localStorage.setItem('user_type', response.data.user_type);\n\n                if (!(response.data.user_type === 'plant technical officer')) {\n                  _context.next = 17;\n                  break;\n                }\n\n                _context.next = 12;\n                return axios.get(\"\".concat(API_URL, \"plant/plant_name\"), axios.defaults.headers.common[\"x-access-token\"] = response.data.token);\n\n              case 12:\n                res = _context.sent;\n                // window.location.reload('/ComingSoon');\n                console.log(res);\n\n                if (res.data.success) {\n                  this.props.history.push('/');\n                  localStorage.setItem('plant_name', res.data.plant_data.plant_name);\n                }\n\n                _context.next = 18;\n                break;\n\n              case 17:\n                this.props.history.push('/');\n\n              case 18:\n                _context.next = 24;\n                break;\n\n              case 20:\n                _context.prev = 20;\n                _context.t0 = _context[\"catch\"](1);\n                console.error(_context.t0.response.data.msg);\n                alert(_context.t0.response.data.msg);\n\n              case 24:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 20]]);\n      }));\n\n      function onSubmit(_x) {\n        return _onSubmit.apply(this, arguments);\n      }\n\n      return onSubmit;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var onRouteChange = this.props.onRouteChange;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"my-login-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        class: \"h-100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"container h-100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"row justify-content-md-center h-100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"card-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"card fat custom-card-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        class: \"card-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Login\"), React.createElement(\"form\", {\n        method: \"POST\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"User Email\"), React.createElement(\"input\", {\n        id: \"email\",\n        type: \"email\",\n        class: \"form-control\",\n        name: \"email\",\n        value: this.state.email,\n        onChange: function onChange(e) {\n          return _this2.change(e);\n        },\n        required: true,\n        autofocus: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Password\"), React.createElement(\"input\", {\n        id: \"password\",\n        type: \"password\",\n        class: \"form-control\",\n        name: \"password\",\n        value: this.state.password,\n        onChange: function onChange(e) {\n          return _this2.change(e);\n        },\n        required: true,\n        \"data-eye\": true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group no-margin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        class: \"btn btn-info btn-block\",\n        onClick: function onClick(e) {\n          return _this2.onSubmit(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Login\")), React.createElement(\"div\", {\n        class: \"margin-top20 text-center custom-frgpswd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: 'http://35.200.166.14/api/employee/forgot',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"Forgot Password\"))))))))))));\n    }\n  }]);\n\n  return AddLogin;\n}(Component);\n\nexport default withRouter(AddLogin);","map":{"version":3,"sources":["/Users/chitranshagnihotri/Desktop/work/code/freelancer_react/Edunomics1/src/components/Login/AddLogin.js"],"names":["React","Component","Link","Redirect","withRouter","NavLink","axios","authService","axiosService","API_URL","AddLogin","props","change","e","setState","target","name","value","state","email","password","onSubmit","bind","preventDefault","post","response","console","log","data","success","localStorage","setItem","token","user_type","get","defaults","headers","common","res","history","push","plant_data","plant_name","error","msg","alert","onRouteChange"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./Login.css\";\nimport { Link, Redirect, withRouter, NavLink } from \"react-router-dom\";\nimport axios from \"axios\";\nimport authService from \"../../services/auth-service\";\nimport axiosService from \"../../services/axios-service\";\nimport { API_URL } from \"../../services/url\";\n\nclass AddLogin extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      password: \"\"\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n  change = e => {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  };\n\n  async onSubmit(e) {\n    e.preventDefault();\n    // this.setState({\n    //   email: \"\",\n    //   password: \"\"\n    // });\n    try {\n      const response = await axios.post(`${API_URL}employee/login`, this.state);\n      console.log(response);\n      if (response.data.success) {\n        localStorage.setItem('token', response.data.token);\n        localStorage.setItem('user_type', response.data.user_type);\n        if (response.data.user_type === 'plant technical officer') {\n          const res = await axios.get(`${API_URL}plant/plant_name`, (axios.defaults.headers.common[\"x-access-token\"] = response.data.token));\n          // window.location.reload('/ComingSoon');\n          console.log(res);\n          if (res.data.success) {\n            this.props.history.push('/');\n            localStorage.setItem('plant_name', res.data.plant_data.plant_name);\n\n          }\n        }\n        else {\n          this.props.history.push('/');\n        }\n      }\n      // console.log(response.data)\n      //   .then(\n      //     function(response) {\n      //       console.log(this.props);\n      //       console.og(\"reponse here\", response);\n      //       console.log(\"authservice gettoke\");\n      // if(response.data.success){\n\n      // \tconst tokentext = response.data.tokenKey\n      // \tlocalStorage.setItem('token', tokentext);\n      // \tthis.props.onRouteChange('home');\n      // \twindow.location.reload('/')\n      // \t// this.props.history.push('/')\n      // \t// window.location.reload('/')\n\n      // \t//window.location.reload('home')\n      // }\n\n      // alert(response.data.msg)\n      //console.log(authService.getToken())\n    } catch (err) {\n      console.error(err.response.data.msg);\n      alert(err.response.data.msg)\n    }\n  }\n\n  render() {\n    const onRouteChange = this.props.onRouteChange;\n    return (\n      <div>\n        <div class=\"my-login-page\">\n          <section class=\"h-100\">\n            <div class=\"container h-100\">\n              <div class=\"row justify-content-md-center h-100\">\n                <div class=\"card-wrapper\">\n                  <div class=\"card fat custom-card-margin\">\n                    <div class=\"card-body\">\n                      <h4 class=\"card-title\">Login</h4>\n                      <form method=\"POST\">\n                        <div class=\"form-group\">\n                          <label for=\"email\">User Email</label>\n\n                          <input\n                            id=\"email\"\n                            type=\"email\"\n                            class=\"form-control\"\n                            name=\"email\"\n                            value={this.state.email}\n                            onChange={e => this.change(e)}\n                            required\n                            autofocus\n                          />\n                        </div>\n\n                        <div class=\"form-group\">\n                          <label for=\"password\">\n                            Password\n                            {/*<a href=\"forgot.html\" class=\"float-right\">\n\t\t\t\t\t\t\t\t\t\t\tForgot Password?\n\t\t\t\t\t\t\t\t\t\t</a>*/}\n                          </label>\n                          <input\n                            id=\"password\"\n                            type=\"password\"\n                            class=\"form-control\"\n                            name=\"password\"\n                            value={this.state.password}\n                            onChange={e => this.change(e)}\n                            required\n                            data-eye\n                          />\n                        </div>\n\n                        {/*<div class=\"form-group\">\n\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t<input type=\"checkbox\" name=\"user_remember\" value={this.state.user_remember} onchange={e => this.change(e)}/> Remember Me\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>*/}\n\n                        <div class=\"form-group no-margin\">\n                          <button\n                            class=\"btn btn-info btn-block\"\n                            onClick={e => this.onSubmit(e)}\n                          >\n                            Login\n                          </button>\n                        </div>\n                        <div class=\"margin-top20 text-center custom-frgpswd\">\n                          {/* <p onClick={() => onRouteChange('register')}>Forgot Password</p> */}\n                          <a href={'http://35.200.166.14/api/employee/forgot'}><p>Forgot Password</p></a>\n                        </div>\n                      </form>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </section>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(AddLogin);\n"]},"metadata":{},"sourceType":"module"}